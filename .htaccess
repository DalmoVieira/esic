# ==================================================
# E-SIC - Apache Configuration
# ==================================================

# Forçar index.php como página padrão
<IfModule mod_dir.c>
    DirectoryIndex index.php
</IfModule>

# Desabilitar listagem de diretórios
<IfModule mod_autoindex.c>
    Options -Indexes
</IfModule>

# Seguir links simbólicos
Options +FollowSymLinks

# Redirecionar para pasta public
<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Se não é a pasta public, redirecionar
    RewriteCond %{REQUEST_URI} !^/esic/public/
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ public/$1 [L]
</IfModule>

# Negar acesso a arquivos sensíveis
<FilesMatch "\.(php~|env|git|svn|htaccess|htpasswd|ini|log|sh|bak|backup)$">
    <IfModule mod_authz_core.c>
        Require all denied
    </IfModule>
</FilesMatch>

# Negar acesso a composer
<Files "composer.*">
    <IfModule mod_authz_core.c>
        Require all denied
    </IfModule>
</Files>

# Segurança adicional
<IfModule mod_headers.c>
    Header set X-Content-Type-Options "nosniff"
    Header set X-Frame-Options "SAMEORIGIN"
    Header set X-XSS-Protection "1; mode=block"
</IfModule>
